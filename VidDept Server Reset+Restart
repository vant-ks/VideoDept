#!/usr/bin/osascript

# Video Production Manager - Reset & Restart (AppleScript)
# Runs silently without opening Terminal windows

do shell script "
cd '/Users/kevin/Dropbox (Personal)/Development/VideoDept/VideoDept/video-production-manager'

# Kill any running servers
pkill -f 'vite' 2>/dev/null
pkill -f 'node.*vite' 2>/dev/null
pkill -f 'tsx.*server.ts' 2>/dev/null
lsof -ti:3000 | xargs kill -9 2>/dev/null
lsof -ti:3010 | xargs kill -9 2>/dev/null
sleep 1

# Start dev server in background
nohup npm run dev > /dev/null 2>&1 &

# Wait for server to be ready
sleep 3
"

# Open reset page in browser
tell application "System Events"
	open location "http://localhost:3000/reset-settings.html"
end tell
